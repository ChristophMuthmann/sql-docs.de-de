---
title: Konfigurieren Sie Fehler- und Warnungsbehandlung Using the SQLSRV Driver | Microsoft Docs
ms.custom: ''
ms.date: 03/26/2018
ms.prod: sql
ms.prod_service: drivers
ms.service: ''
ms.component: php
ms.reviewer: ''
ms.suite: sql
ms.technology:
- drivers
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- errors and warnings
ms.assetid: 257c6f53-9137-4619-a613-eee33d2077e8
caps.latest.revision: 20
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: 42efff9877553fdd478b4acce0e9e71816a00260
ms.sourcegitcommit: 2ddc0bfb3ce2f2b160e3638f1c2c237a898263f4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/03/2018
---
# <a name="how-to-configure-error-and-warning-handling-using-the-sqlsrv-driver"></a>Vorgehensweise: Konfigurieren der Behandlung von Fehlern und Warnungen unter Verwendung des SQLSRV-Treibers
[!INCLUDE[Driver_PHP_Download](../../includes/driver_php_download.md)]

Dieses Thema beschreibt, wie der SQLSRV-Treiber zur Behandlung von Fehlern und Warnungen konfiguriert wird.  
  
Standardmäßig werden mit der SQLSRV-Treiber Warnungen als Fehler behandelt; ein Aufruf einer **Sqlsrv** -Funktion, die einen Fehler oder eine Warnung generiert gibt **"false"**. Um dieses Verhalten zu deaktivieren, verwenden die [Sqlsrv_configure](../../connect/php/sqlsrv-configure.md) Funktion. Wenn Sie die folgende Codezeile am Anfang eines Skripts enthalten ist ein **Sqlsrv** Funktion, die nur Warnungen (keine Fehler) generiert keine zurück **"false"**:  
  
`sqlsrv_configure("WarningsReturnAsErrors", 0);`  
  
Die folgende Codezeile setzt das Standardverhalten (Warnungen als Fehler behandelt):  
  
`sqlsrv_configure("WarningsReturnAsErrors", 1);`  
  
> [!NOTE]  
> Warnungen, die den SQLSTATE-Werten 01000, 01001, 01003 und 01S02 entsprechen, werden nie als Fehler behandelt. Eine **sqlsrv** -Funktion, die nur Warnungen generiert, die einem dieser Zustände entsprechen, gibt unabhängig von der Konfiguration nicht **false**zurück.  
  
Der Wert für **WarningsReturnAsErrors** kann auch in der Datei php.ini festgelegt werden. Beispielsweise diesen Eintrag in der `[sqlsrv]` -Abschnitts der "PHP.ini"-Datei schaltet das Standardverhalten.  
  
`sqlsrv.WarningsReturnAsErrors = 0`  
  
Informationen zum Abrufen von Fehler- und Warnungsinformationen finden Sie unter [sqlsrv_errors](../../connect/php/sqlsrv-errors.md) und unter [Vorgehensweise: Behandeln von Fehlern und Warnungen](../../connect/php/how-to-handle-errors-and-warnings-using-the-sqlsrv-driver.md).  
  
## <a name="example"></a>Beispiel  
Das folgende Codebeispiel veranschaulicht, wie das Standardverhalten der Fehlerbehandlung deaktiviert wird. Das Beispiel verwendet den Befehl PRINT von Transact-SQL, um eine Warnung zu generieren. Weitere Informationen zum Befehl PRINT, finden Sie unter [PRINT (Transact-SQL)](../../t-sql/language-elements/print-transact-sql.md).  
  
Das Beispiel veranschaulicht durch das Ausführen einer Abfrage, die eine Warnung generiert, zunächst das Standardverhalten der Fehlerbehandlung. Diese Warnung wird als Fehler behandelt. Nach Ändern der Konfiguration für die Fehlerbehandlung wird die gleiche Abfrage ausgeführt. Die Warnung wird nicht als Fehler behandelt.  
  
Das Beispiel setzt voraus, dass SQL Server auf dem lokalen Computer installiert ist. Wenn das Beispiel über die Befehlszeile ausgeführt wird, werden alle Ausgaben in die Konsole geschrieben.  
  
```  
<?php  
/* Connect to the local server using Windows Authentication. */  
$serverName = "(local)";  
$conn = sqlsrv_connect( $serverName );  
if( $conn === false )  
{  
     echo "Could not connect.\n";  
     die( print_r( sqlsrv_errors(), true));  
}  
  
/* The Transact-SQL PRINT statement can be used to return   
informational or warning messages*/  
$tsql = "PRINT 'The PRINT statement can be used ";  
$tsql .= "to return user-defined warnings.'";  
  
/* Execute the query and print any errors. */  
$stmt1 = sqlsrv_query( $conn, $tsql);  
if($stmt1 === false)  
{  
     echo "By default, warnings are treated as errors:\n";  
     /* Dump errors in the error collection. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
  
/* Disable warnings as errors behavior. */  
sqlsrv_configure("WarningsReturnAsErrors", 0);  
  
/* Execute the same query and print any errors. */  
$stmt2 = sqlsrv_query( $conn, $tsql);  
if($stmt2 === false)  
{  
     /* Dump errors in the error collection. */  
     /* Since the warning generated by the query is be treated as   
        an error, this block of code will not be executed. */  
     print_r(sqlsrv_errors(SQLSRV_ERR_ERRORS));  
}  
else  
{  
     echo "After calling ";  
     echo "sqlsrv_configure('WarningsReturnAsErrors', 0), ";  
     echo "warnings are not treated as errors.";  
}  
  
/*Close the connection. */  
sqlsrv_close($conn);  
?>  
```  
  
## <a name="see-also"></a>Siehe auch  
[Protokollieren von Aktivitäten](../../connect/php/logging-activity.md)

[Programmierhandbuch für den Microsoft-Treiber für PHP für SQLServer](../../connect/php/programming-guide-for-php-sql-driver.md)

[API-Referenz für den SQLSRV-Treiber](../../connect/php/sqlsrv-driver-api-reference.md)  
  
